---
title: 'Chapter 1: Interactive Notebook for Students'
author: "Ram Gopal, Dan Philps, and Tillman Weyde"
date: "Summer 2022"
output:
  word_document:
    toc: yes
    toc_depth: '4'
  pdf_document:
    toc: yes
    toc_depth: '4'
  html_document:
    theme: united
    highlight: tango
    toc: yes
    toc_float: yes
    toc_depth: 4
---

```{r setup, warning=FALSE,include=FALSE}
library(knitr)
knitr::opts_chunk$set(echo = TRUE)
results='markup' 
options(scipen = 999, digits = 4) #set to four decimal 

inline_hook <- function (x) {
  if (is.numeric(x)) {
    # ifelse does a vectorized comparison
    # If integer, print without decimal; otherwise print 4 places
    res <- ifelse(x == round(x),
      sprintf("%d", x),
      sprintf("%.4f", x)
    )
    paste(res, collapse = ", ")
  }
}
knit_hooks$set(inline = inline_hook)

```



# Simple Computations

Create a new script file. Let us begin with simple computations in R using `*`,`/`,`sqrt()`,`exp()`, and `log()` operators and functions. 

```{r}
25*77  
25/5  
sqrt(77)  
exp(2.5)  
log(55) 
```
 
# Creating Vectors

To create a vector, the appropriate syntax is `v = c()`. An example is:

```{r}
v = c(1,2,4,63,7,5)
```

To create a vector of a sequence, we use `seq()`.  

```{r}
vec1 = seq(1,5)
vec1
vec2 = seq(2,55,by = 3)
vec2
```

The option `by` in the sequence function allows you to increment by any value. 

To create a vector that repeats a number, character, or a vector of numbers or 
characters, we use `rep()`. Characters must be in quotations. 

```{r}
vec1 = rep(1,10)
vec1
vec2 = rep(c(3,4,5),3)
vec2
vec3 = rep("c",5)
vec3
```

The second element in parenthesis is the number of times you want the first 
element to be repeated. 

To find the sum of a vector, we use the command `sum()`.

```{r}
sum(vec1)
```

The following are other useful vector based functions in R.     

`min(x)` - minimum value of vector x    
`max(x)` - maximum value of vector x  
`mean(x)` - mean value of vector x  
`median(x)` - median value of vector x  
`quantile(x, p)` - pth quantile of vector x  
`sd(x)` - standard deviation of vector x  
`var(x)` - variance of vector x  
`IQR(x)` - Inter Quartile Range (IQR) of vector x  
`diff(range(x))` - total range of vector x  

Let us create three vectors to store information about weight, height, and gender. since gender is not numeric data, we use quotation marks when creating the vector.

Note that initially, the gender vector is character. This can be seen using the
`class()` command. The gender vector must be a factor (or more commonly refered to as 
categorical data) in order to be plotted, 
and thus we write `factor(gender)` in the parenthesis of the `plot()` command.

```{r}
weight = c(60,72,57,90,95,72)
height = c(1.75,1.8,1.65,1.9,1.74,1.91)
gender = c("m","f","m","f","f","m")
gender
class(gender)
```

Using the `plot()` command, we can plot these vectors as scatterplots or boxplots. The order within the parenthesis is the variable you want on the x axis, then the variable you want on the y axis. `col` can be used to change the color of the dots in a 
scatterplot, and `pch` changes the design of the dots. 

```{r}
plot(factor(gender),weight)
plot(weight,height,col = "red",pch=9)
```

# Creating Data Frames

A data frame is a two dimensional variable. To create a data frame called **ghw** using these three vectors, we use the command `data.frame()`. `View()` is a key command that allows you to see the data frame as a table in a separate tab. 

```{r}
ghw=data.frame(gender,height,weight)
ghw
View(ghw)
```

Now that the data frame is created, if you want to plot two variables from the 
data frame with the `plot()` command, you must specify both the data frame and 
the variable from the data frame. The appropriate syntax is, for example, 
`ghw$weight`, `ghw$height`, and `ghw$gender`. 

```{r}
plot(ghw$weight,ghw$height)
```

## Information about Data Frames

If you need a quick summary of the structure or contents of a data frame, there
are a few helpful commands. `summary()` gives you the min, max, mean, median, 
and 1st and 3rd quartiles of numerical data, and the length, class, and mode of 
categorical data. `dim()` gives you the number of rows and columns of your data
frame. `str()` gives you the first few elements of each variable. `head()` gives 
you the first few rows of the data frame. 

```{r}
summary(ghw)
dim(ghw)
str(ghw)
head(ghw)
```

To see the full data frame in another tab, use the `View()` command. 

```{r}
View(ghw)
```

## Adding Columns

You can add columns to a data frame based on the data from existing columns. Let's calcuate the Body Mass Index which is defined as:

$$ bmi = {{weight}\over{height^2}}$$

```{r}
ghw$bmi = ghw$weight/ghw$height^2
knitr::kable(ghw)
```

# Statistics – A First Look 

Formally speaking, statistics is a branch of mathematics that transforms data into useful information for decision makers. There are two major areas of statistics – descriptive statistics and inferential statistics. As the name indicates, the objective of descriptive statistics is to describe and understand features of a given set of data. The much broader area of inferential statistics aims to study a sample of data to infer insights on the larger population from which the sample was drawn. Descriptive statistics allow us to detect outliers (i.e., underperforming sales executives), to compare different stock returns in relation to the oil price, using correlations, and more.  Let's begin by computing the arithmetic mean of two groups of data.

```{r}
g1 = c(34, 49, 64, 38, 60, 78, 67, 36, 19, 37) 
g2 = c(77, 75, 78, 41, 51, 20, 61, 73, 76, 38) 

mean(g1) 
mean(g2)
```
We can conclude that the average age of individuals in the second group is higher than in the first group. A first glimpse of insights on our data! The mean as a measure of central tendency, however, is susceptible to extreme values, also termed outliers. Let us see an example of this. Consider the following two groups of data: 

```{r}
g1a = c(34, 49, 64, 38, 60, 78, 67, 36, 19, 37) 
g2a = c(34, 49, 64, 38, 60, 400, 67, 36, 19, 37) 
mean(g1a) 
mean(g2a)

```
A single outlier value in our data nearly doubles the value of the mean, which highlights the great impact of outliers on it. A more robust measure to outliers is the median. The median is simply the “middle value” such that half the data has values less than or equal to the median, and half larger than or equal to it. Let us compute the median of the two groups. 

```{r}
median(g1a)
median(g2a)
```

Let us compute the values of the variance for the groups g1 and g2.

```{r}
var(g1)
var(g2)
```
In addition to a larger mean, group 2 has a higher variance than g1 indicating that the values in the second group are more spread out than in the first group. The code below computes the standard deviation, and we can verify that it is indeed the square root of the variance.

```{r}
sd(g1)
sd(g2)
```
The following code computes the coefficient of variation for groups 1 and 2: 
```{r}
sd(g1)*100/mean(g1) 
sd(g2)*100/mean(g2) 
```
The z-score indicates how many standard deviations a data point is away from the mean. It is a key business analytic that can be used for anything from identifying mis-sized widgets on a factory line to determining historic extremes in valuations of credit spreads. 

```{r}
(g1-mean(g1))/sd(g1) 
scale(g1)
```

```{r}
g1a = c(34, 49, 64, 38, 60, 78, 67, 36, 19, 37) 
g2a = c(34, 49, 64, 38, 60, 400, 67, 36, 19, 37) 
scale(g1a)[,1]
scale(g2a)[,1]
```
The sixth observation in g2a has a z-score of 2.82 suggesting a possible outlier. Z-scores are a simple, easy tool to detect possible outliers in our data. 

An extension of the median is the measure quartile, and it illustrates how the data values are distributed.

```{r}
quantile(g1) 
boxplot(g1)
```

Let us code the computation of covariance and correlation between height and weight.
```{r}
cov(ghw$weight,ghw$height)
cor(ghw$weight,ghw$height)
```

# Some Useful Resources

1. The R reference card is very useful if you want to look up the basic syntax. You are strongly recommended to download and keep it handy as you work to get comfortable with coding in R. [R Reference Card](https://cran.r-project.org/doc/contrib/Short-refcard.pdf) 
2. There are a number of other cheatsheets for specific packages and functionalities. You can find a list of them at [Cheatsheets](https://rstudio.com/resources/cheatsheets/>)  
3. [Quick-R](https://www.statmethods.net/)
